<!DOCTYPE html>
<html lang="en" id="dnscrypt-proxy">
    <head>
        <title>
            {{.Title}}
        </title>
        <link rel="stylesheet" type="text/css" href="/webman/3rdparty/dnscrypt-proxy/style.css">
    </head>
    <body>
        <div class="message">
            <p class="error">{{.ErrorMessage}}</p>
            <p class="success">{{.SuccessMessage}}</p>
        </div>
        <form method="get" class="fileSelector">
            <span id="fileSelect">File:
                <select name="file">
                    {{- $File := .File -}}
                    {{- range $key, $value := .Files -}}
                        {{- if eq $File $key }}
                    <option value="{{ $key }}" selected>{{ $value }}</option>
                        {{- else }}
                    <option value="{{ $key }}">{{ $value }}</option>
                        {{- end -}}
                    {{- end }}
                </select>
            </span>
            <input class="btn" type="submit" value="Open">
        </form>
        <form method="post" class="fileEditor">
            <input type="hidden" name="file" value="{{.File}}">
            <div id="fileContent">
                <textarea name="fileContent" autocomplete="off">{{.FileData}}</textarea>
            </div>
            <input class="btn primary" type="submit" value="Apply">
        </form>
    </body>
    <script src="codemirror/lib/codemirror.js"></script>
    <link rel="stylesheet" href="codemirror/lib/codemirror.css">
    <script src="codemirror/mode/toml/toml.js"></script>
    <script type="text/javascript">
        textArea = document.getElementsByTagName('textarea')[0]
        var cm = CodeMirror.fromTextArea(textArea);
    </script>
</html>
